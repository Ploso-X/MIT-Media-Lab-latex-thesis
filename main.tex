% -*- Mode:TeX -*-

%% IMPORTANT: The official thesis specifications are available at:
%%            http://libraries.mit.edu/archives/thesis-specs/
%%
%%            Please verify your thesis' formatting and copyright
%%            assignment before submission.  If you notice any
%%            discrepancies between these templates and the 
%%            MIT Libraries' specs, please let us know
%%            by e-mailing thesis@mit.edu

%% The documentclass options along with the pagestyle can be used to generate
%% a technical report, a draft copy, or a regular thesis.  You may need to
%% re-specify the pagestyle after you \include  cover.tex.  For more
%% information, see the first few lines of mitthesis.cls. 

%\documentclass[12pt,vi,twoside]{mitthesis}o
%%
%%  If you want your thesis copyright to you instead of MIT, use the
%%  ``vi'' option, as above.
%%
%\documentclass[12pt,twoside,leftblank]{mitthesis}
%%
%% If you want blank pages before new chapters to be labelled ``This
%% Page Intentionally Left Blank'', use the ``leftblank'' option, as
%% above. 

\documentclass[a4paper]{tufte-book}
\usepackage{lgrind}
\usepackage{graphicx}
\usepackage{lipsum}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{moreverb}
\usepackage{xcolor}
\usepackage{booktabs}
\usepackage{alltt}
\usepackage[parfill]{parskip}
\usepackage{url}
\usepackage{array}
\usepackage{pdfpages}
\usepackage{wrapfig}
\usepackage{geometry}
\usepackage{bold-extra}
\usepackage{natbib}
\usepackage[export, reorder]{splitbib}

\renewcommand{\UrlFont}{\small\tt}
\setkeys{Gin}{width=\linewidth,totalheight=\textheight,keepaspectratio}
\newcommand\MyBox[1]{%
  \fbox{\parbox[c][1.7cm][c]{1.7cm}{\centering #1}}%
}
\newcommand\MyVBox[1]{%
  \parbox[c][1.7cm][c]{1cm}{\centering\bfseries #1}%
}  
\newcommand\MyHBox[2][\dimexpr1.7cm+2\fboxsep\relax]{%
  \parbox[c][1cm][c]{#1}{\centering\bfseries #2}%
}  

\newcommand\MyTBox[3]{%
  \MyVBox{#1}\MyBox{#2}\hspace*{-\fboxrule}%
  \MyBox{#3}\par\vspace{-\fboxrule}
}  
\usepackage{amsmath}
\usepackage[dvipsnames]{xcolor}
\usepackage{listings}


\lstdefinestyle{code}{
    frame=single,
    breaklines=true,
    postbreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\color{red}\hookrightarrow\space}},
    xrightmargin=-5.5cm,
    language=python,
    numberstyle=\color{gray},
    basicstyle=\ttfamily,
    numbers=left,                    
    numbersep=5pt
}
\lstdefinestyle{codearduino}{
    frame=single,
    breaklines=true,
    postbreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\color{red}\hookrightarrow\space}},
    xrightmargin=-5.5cm,
    language=C,
    numberstyle=\color{gray},
    basicstyle=\ttfamily,
    numbers=left,                    
    numbersep=5pt,
    keywordstyle=\bfseries\color{green!40!black},
    commentstyle=\itshape\color{purple!40!black},
    identifierstyle=\color{darkgray},
    stringstyle=\color{orange},
}
\lstdefinestyle{codejava}{
    frame=single,
    breaklines=true,
    postbreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\color{red}\hookrightarrow\space}},
    xrightmargin=-5.5cm,
    language=Java,
    numberstyle=\color{gray},
    basicstyle=\ttfamily,
    numbers=left,                    
    numbersep=5pt,
    keywordstyle=\bfseries\color{green!40!black},
    commentstyle=\itshape\color{purple!40!black},
    identifierstyle=\color{darkgray},
    stringstyle=\color{orange},
}
\lstdefinestyle{codematlab}{
    frame=single,
    breaklines=true,
    postbreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\color{red}\hookrightarrow\space}},
    xrightmargin=-5.5cm,
    language=Matlab,
    numberstyle=\color{gray},
    basicstyle=\ttfamily,
    numbers=left,                    
    numbersep=5pt,
    keywordstyle=\bfseries\color{green!40!black},
    commentstyle=\itshape\color{purple!40!black},
    identifierstyle=\color{darkgray},
    stringstyle=\color{orange},
}
\lstdefinestyle{codematlab2}{
    frame=none,
    breaklines=true,
    xrightmargin=-5.5cm,
    postbreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\color{red}\hookrightarrow\space}},
    language=Matlab,
    basicstyle=\ttfamily,
    keywordstyle=\bfseries\color{green!40!black},
    commentstyle=\itshape\color{purple!40!black},
    identifierstyle=\color{darkgray},
    stringstyle=\color{orange},
}

\definecolor{mygray}{gray}{0.95}

\lstdefinestyle{codedef}{
    breaklines=true,
    xrightmargin=-5.5cm,
    backgroundcolor=\color{mygray},
    basicstyle=\small\sffamily,
    frame=tb,
    escapechar = \%,
    moredelim={[is][keywordstyle]{@@}{@@}}
}

\lstdefinestyle{codedef2}{
    breaklines=true,
    xrightmargin=-5.5cm,
    backgroundcolor=\color{mygray},
    basicstyle=\rmfamily,
    frame=tb,
    escapechar = \%,
    moredelim={[is][keywordstyle]{@@}{@@}}
}

\usepackage{titlesec} %{command}{left spacing}{before spacing}{after spacing}[right]
%\titlespacing\subsection{0pt}{12pt plus 4pt minus 2pt}{12pt plus 2pt minus 2pt}
%\titlespacing{\subsection}{0pt}{\parskip}{\parskip}

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,      
    urlcolor=NavyBlue,
}
\urlstyle{tt}

\usepackage{enumitem}

%% These have been added at the request of the MIT Libraries, because
%% some PDF conversions mess up the ligatures.  -LB, 1/22/2014
\usepackage{fancyvrb}
\usepackage{gensymb}
%%
% Prints argument within hanging parentheses (i.e., parentheses that take
% up no horizontal space).  Useful in tabular environments.
\newcommand{\hangp}[1]{\makebox[0pt][r]{(}#1\makebox[0pt][l]{)}}

%%
% Prints an asterisk that takes up no horizontal space.
% Useful in tabular environments.
\newcommand{\hangstar}{\makebox[0pt][l]{*}}

%%
% Prints a trailing space in a smart way.
\usepackage{xspace}
\usepackage{longtable}

% custom page numbering
\fancypagestyle{customstyle}{%
\fancyhf{}%
	\fancyhead[LE]{\thepage\quad\smallcaps{\newlinetospace{}}}% 
	\fancyhead[RO]{\smallcaps{\newlinetospace{}}\quad\thepage}%
}

%\usepackage[parfill]{parskip}
%\PassOptionsToPackage{parskip}{parfill}
% remove paragraph indentation
\makeatletter
% Paragraph indentation and separation for normal text
\renewcommand{\@tufte@reset@par}{%
  \setlength{\RaggedRightParindent}{0.0pc}%
  \setlength{\JustifyingParindent}{0.0pc}%
  \setlength{\parindent}{0pc}%
  \setlength{\parskip}{15pt}%\baselineskip
}
\@tufte@reset@par

% Paragraph indentation and separation for marginal text
\renewcommand{\@tufte@margin@par}{%
  \setlength{\RaggedRightParindent}{0.0pc}%
  \setlength{\JustifyingParindent}{0.0pc}%
  \setlength{\parindent}{0.0pc}%
  \setlength{\parskip}{10pt}%
}
\makeatother

\newcommand\invisiblesection[1]{%
  \refstepcounter{section}%
  \addcontentsline{toc}{section}{#1}%
  %\sectionmark{#1}
  }
\newcommand{\blankpage}{
	\newpage
	\thispagestyle{empty}
	\mbox{}
	\newpage
}
\include{categories}

\begin{document}

\include{pages/00cover}
% Some departments (e.g. 5) require an additional signature page.  See
% signature.tex for more information and uncomment the following line if
% applicable.
% \include{signature}

\pagestyle{customstyle}
\include{contents}
\pagestyle{empty}
\include{notations}

\blankpage

\pagestyle{customstyle}
\justify
\setcounter{page}{0}
\include{pages/01introduction}
\include{pages/02background}
\include{pages/03controlStrategy}
\include{pages/04smallScale}
\include{pages/05realScale}
\include{pages/06modelValidation}
\include{pages/07costSummary}
\include{pages/08conclusions}

%\include{pages/01introduction_template}

\include{pages/XX_biblio}

\appendix
\include{appendix/datasheets}
\include{appendix/code}
\include{appendix/visuals}
\include{appendix/schematics}
\include{appendix/drawings}




\end{document}


